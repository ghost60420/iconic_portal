{% extends "crm/base.html" %}

{% block content %}
<style>
  .calendar-add-wrap {
    max-width: 900px;
    margin: 20px auto;
  }

  .calendar-add-card {
    background: #111;
    border-radius: 10px;
    border: 1px solid #333;
    padding: 18px 20px;
    box-shadow: 0 0 12px rgba(0, 0, 0, 0.6);
  }

  .calendar-add-title {
    font-size: 22px;
    font-weight: 700;
    color: #f5d580;
    margin-bottom: 4px;
  }

  .calendar-add-sub {
    font-size: 13px;
    color: #d0c08a;
    margin-bottom: 14px;
  }

  .calendar-add-row {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
  }

  .calendar-add-col {
    flex: 1;
    min-width: 260px;
  }

  .calendar-add-label {
    font-size: 13px;
    color: #f5d580;
    margin-bottom: 3px;
  }

  .calendar-add-help {
    font-size: 11px;
    color: #a89b64;
    margin-bottom: 6px;
  }

  .calendar-add-textarea {
    min-height: 90px;
    resize: vertical;
  }

  .calendar-add-chip {
    display: inline-block;
    font-size: 11px;
    padding: 2px 8px;
    border-radius: 999px;
    border: 1px solid #444;
    background: #181818;
    color: #e0d29a;
    margin-right: 6px;
    margin-bottom: 4px;
  }

  .calendar-add-footer {
    margin-top: 14px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 10px;
    flex-wrap: wrap;
  }

  .btn-main {
    padding: 7px 16px;
    border-radius: 6px;
    border: 1px solid #e4c56a;
    background: linear-gradient(145deg, #f5d580, #d4b35f);
    color: #000;
    font-weight: 600;
    font-size: 13px;
    cursor: pointer;
    box-shadow: 0 3px 0 #8a6b24;
  }

  .btn-main:hover {
    transform: translateY(1px);
    box-shadow: 0 1px 0 #8a6b24;
  }

  .btn-ghost {
    padding: 6px 12px;
    border-radius: 6px;
    border: 1px solid #444;
    background: #181818;
    color: #f5d580;
    font-size: 12px;
    text-decoration: none;
  }

  .btn-ghost:hover {
    background: #222;
    text-decoration: none;
  }

  .calendar-add-links {
    font-size: 11px;
    color: #aaa;
  }

  .calendar-add-links a {
    color: #f5d580;
    text-decoration: none;
  }

  .calendar-add-links a:hover {
    text-decoration: underline;
  }

  .calendar-add-section-title {
    font-size: 14px;
    font-weight: 600;
    color: #f5d580;
    margin-bottom: 6px;
    border-bottom: 1px solid #333;
    padding-bottom: 4px;
  }
</style>

<div class="calendar-add-wrap">

  <!-- page title bar -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    <div>
      <div class="calendar-add-title">Add calendar event</div>
      <div class="calendar-add-sub">
        Plan calls, follow up, sampling, production and shipping in one place.
      </div>
    </div>
    <div>
      <a href="{% url 'calendar_list' %}" class="btn-ghost">Back to calendar</a>
    </div>
  </div>

  <div class="calendar-add-card">

    <!-- form start -->
    <form method="post">
      {% csrf_token %}

      <div class="calendar-add-row">

        <!-- left side basic info -->
        <div class="calendar-add-col">
          <div class="calendar-add-section-title">Event details</div>

          <div class="mb-2">
            <div class="calendar-add-label">Title</div>
            {{ form.title }}
          </div>

          <div class="mb-2">
            <div class="calendar-add-label">Type</div>
            <div class="calendar-add-help">
              Choose call, follow up, sample, production, shipping, payment or other.
            </div>
            {{ form.event_type }}
          </div>

          <div class="mb-2">
            <div class="calendar-add-label">Priority and status</div>
            <div class="calendar-add-row">
              <div style="flex:1;min-width:120px;">
                {{ form.priority.label_tag }}
                {{ form.priority }}
              </div>
              <div style="flex:1;min-width:120px;">
                {{ form.status.label_tag }}
                {{ form.status }}
              </div>
            </div>
          </div>

          <div class="mb-2">
            <div class="calendar-add-label">Note</div>
            <div class="calendar-add-help">
              Short internal note about the event. AI will add a smart note later.
            </div>
            {{ form.note }}
          </div>
        </div>

        <!-- right side time and links -->
        <div class="calendar-add-col">
          <div class="calendar-add-section-title">Time and links</div>

          <div class="mb-2">
            <div class="calendar-add-label">Start</div>
            {{ form.start_datetime }}
          </div>

          <div class="mb-2">
            <div class="calendar-add-label">End</div>
            {{ form.end_datetime }}
          </div>

          <div class="mb-2">
            <div class="calendar-add-label">Reminder</div>
            <div class="calendar-add-help">
              Set minutes before to get a reminder.
            </div>
            {{ form.reminder_minutes_before }}
          </div>

          <div class="mb-2">
            <div class="calendar-add-label">Assign to</div>
            <div class="calendar-add-row">
              <div style="flex:1;min-width:140px;">
                {{ form.assigned_to_name.label_tag }}
                {{ form.assigned_to_name }}
              </div>
              <div style="flex:1;min-width:140px;">
                {{ form.assigned_to_email.label_tag }}
                {{ form.assigned_to_email }}
              </div>
            </div>
          </div>

          <div class="mb-2">
            <div class="calendar-add-label">Linked records</div>
            <div class="calendar-add-help">
              Connect this event to lead, opportunity or customer.
            </div>
            {{ form.lead }}
            {{ form.opportunity }}
            {{ form.customer }}
          </div>

          <div class="mb-2">
            <div class="calendar-add-label">Production stage</div>
            {{ form.production_stage }}
          </div>

          {% if linked_lead %}
            <div class="mt-2">
              <span class="calendar-add-chip">
                Linked to lead {{ linked_lead.lead_id }} â€“ {{ linked_lead.account_brand }}
              </span>
            </div>
          {% endif %}
        </div>
      </div>

      <!-- footer buttons -->
      <div class="calendar-add-footer">
        <div>
          <button type="submit" class="btn-main">
            Save event
          </button>
        </div>
        <div class="calendar-add-links">
          After save you can drag the event in the calendar to change the date.
        </div>
      </div>
    </form>
    <!-- form end -->

  </div>
</div>
{% endblock %}